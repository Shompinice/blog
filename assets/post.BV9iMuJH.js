import{s as b,u as T,a as C,b as L}from"./app.D9mrTP1r.js";import{u as M}from"./common.Buwv_arv.js";import"./chunks/dayjs.CCYrSalk.js";import{f as v,j as k,O as c,K as n,W as l,U as p,X as g,v as i,F as w,S,r as $,p as R,P as V,L as D,Y as A,u as y,V as P,I as B,J as j}from"./framework.D5YeqtOo.js";import{d as N}from"./chunks/pinia.BSPaDwd_.js";import{d as O,u as W}from"./chunks/vue-router.Zf6w1DYy.js";import"./chunks/vue-i18n.BoRxRNiX.js";import"./chunks/nprogress.BahbDzmd.js";const z=N("routerStore",()=>({router:O()}));function E(){const t=z().router;return v(()=>{const f=["/:..all","/:all(.*)*","/","/:path(.*)"];return t.getRoutes().filter(e=>e.name).filter(e=>e.meta).filter(e=>e.meta.frontmatter).filter(e=>e.path&&!f.includes(e.path)).map(e=>Object.assign({path:e.path,excerpt:e.meta.excerpt},e.meta.frontmatter||{}))})}function F(h={}){const t=E();return v(()=>{const f=t.value.filter(o=>{var m,_;return((m=o.path)==null?void 0:m.startsWith("/posts"))&&!((_=o.path)!=null&&_.endsWith(".html"))&&o.date&&(!h.type||o.type===h.type)&&(!o.hide||o.hide==="index")}),d=b(f.filter(o=>o.top)).sort((o,m)=>m.top-o.top),e=b(f.filter(o=>!o.top));return d.concat(e)})}const I={mt:"14vh"},H={class:"modern-safe-padding pt-6 space-y-1 xl:pb-10"},q={class:"st-text text-3xl font-extrabold leading-9 tracking-tight md:text-5xl sm:text-4xl md:leading-14 sm:leading-10"},J={key:0,color:"gray-500",pt7:""},K={key:0,class:"reading-time inline-flex-center whitespace-nowrap"},U={key:1},X={key:2,class:"inline-flex-center reading-time whitespace-nowrap"},Y={m:"l-1"},G={key:3},Q={key:4,class:"inline-flex-center word-count whitespace-nowrap"},Z={m:"l-1"},tt={class:"divide-y divide-gray-200 xl:divide-y-0 dark:divide-gray-700",style:{"grid-template-rows":"auto 1fr"}},et={class:"xl:col-span-3 xl:row-span-2 divide-y divide-gray-200 xl:pb-0 dark:divide-gray-700"},ot=k({__name:"ModernArticle",setup(h){const t=M(),f=T(),d=v(()=>{var s;if(!((s=t.value)!=null&&s.updated))return;const e=t.value.updated instanceof Date?t.value.updated:new Date(t.value.updated),m=Math.floor((new Date().getTime()-e.getTime())/1e3),_={年:31536e3,月:2592e3,周:604800,天:86400,小时:3600};for(const[a,u]of Object.entries(_)){const r=Math.floor(m/u);if(r>=1)return`${r}${a}前更新`}return"刚刚更新"});return(e,o)=>(n(),c("article",I,[l("header",H,[l("h1",q,g(i(t).title),1),i(f).statistics.enable?(n(),c("div",J,[i(t).updated||i(t).readingTime||i(t).wordCount?(n(),c(w,{key:0},[i(t).updated?(n(),c("span",K,g(d.value),1)):p("v-if",!0),i(t).updated&&(i(t).readingTime||i(t).wordCount)?(n(),c("span",U," · ")):p("v-if",!0),i(t).readingTime?(n(),c("span",X,[l("time",Y,g(i(t).readingTime)+" 分钟阅读",1)])):p("v-if",!0),i(t).readingTime&&i(t).wordCount?(n(),c("span",G," · ")):p("v-if",!0),i(t).wordCount?(n(),c("span",Q,[l("span",Z,g(i(t).wordCount)+" 字",1)])):p("v-if",!0)],64)):p("v-if",!0)])):p("v-if",!0)]),l("div",tt,[l("div",et,[S(e.$slots,"default")])])]))}}),st={class:"modern-safe-padding modern-post-list"},rt={key:0,top:"0",left:"0",class:"modern-post-list-header",sticky:"","z-10":""},nt={relative:"",h:"63px",w:"md:15.5vw","ml-auto":""},at={absolute:"",bottom:"0",left:"0"},it={flex:"","items-center":"","text-xl":"","font-bold":"",class:"modern-post-list-title"},ct=["mt","data-index"],dt={class:"modern-post-title"},lt={class:"modern-post-series","font-size-sm":""},ut=["innerHTML"],pt=k({__name:"ModernPostList",props:{type:{},posts:{},curPage:{default:1}},setup(h){const t=h,f=F({type:t.type||""}),d=v(()=>(t.posts||f.value).filter(a=>a.path!=="/posts"));function e(s){if(!s)return"";const a=s instanceof Date?s:new Date(s),u=a.getMonth()+1,r=a.getDate();return`${u}/${r}`}function o(s){if(s===0)return!0;const a=e(d.value[s].date),u=e(d.value[s-1].date);return a!==u}const m=$(null),_=$([]);return R(()=>{if(d.value.length){_.value=Array.from({length:d.value.length}).fill(!1);const s=new IntersectionObserver(a=>{a.forEach(u=>{const r=Number.parseInt(u.target.getAttribute("data-index")||"0");u.isIntersecting&&setTimeout(()=>{_.value[r]=!0},r*50)})},{threshold:.1,rootMargin:"0px 0px 100px 0px"});setTimeout(()=>{document.querySelectorAll(".modern-post-item").forEach(a=>{s.observe(a)})},0)}}),(s,a)=>{const u=D("RouterLink");return n(),c("div",{ref_key:"containerRef",ref:m,w:"md:19.37vw","max-h-100vh":"","overflow-y-auto":"",class:"modern-scroll-container"},[l("div",st,[(n(!0),c(w,null,V(d.value,(r,x)=>(n(),c(w,{key:r.path},[o(x)?(n(),c("div",rt,[l("div",nt,[l("div",at,[l("div",it,g(e(r.date)),1)])])])):p("v-if",!0),l("div",{w:"md:15.5vw","ml-auto":"",class:A(["modern-post-item",{"item-visible":_.value[x]}]),mb:"47px",mt:o(x)?"63px":"0","data-index":x},[y(u,{to:r.path||"",class:"modern-link-wrapper"},{default:P(()=>[l("h2",dt,g(r.title),1),l("div",lt,[r.excerpt?(n(),c("div",{key:0,class:"modern-post-excerpt",innerHTML:r.excerpt},null,8,ut)):p("v-if",!0)])]),_:2},1032,["to"])],10,ct)],64))),128))])],512)}}}),mt=B(pt,[["__scopeId","data-v-223ddeaa"]]),ft={flex:"~"},_t={key:1,w:"md:76vw full","max-h":"100vh",flex:"md:~","justify-center":"","overflow-y-auto":""},$t=k({__name:"post",setup(h){const t=W(),d=C(L).smaller("md"),e=v(()=>t.path.startsWith("/posts/")&&t.path!=="/posts"),o=v(()=>!d.value||!e.value),m=v(()=>!d.value||e.value);return(_,s)=>{const a=mt,u=D("RouterView"),r=ot;return n(),c("div",ft,[o.value?(n(),j(a,{key:0})):p("v-if",!0),m.value?(n(),c("div",_t,[y(r,null,{default:P(()=>[y(u)]),_:1})])):p("v-if",!0)])}}});export{$t as default};
